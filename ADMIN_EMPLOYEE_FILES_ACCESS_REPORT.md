# –û—Ç—á–µ—Ç: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–¥–º–∏–Ω—É –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Ñ–∞–π–ª—ã –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –¥–ª—è —Ä–∞–±–æ—á–∏—Ö —Ñ–∞–π–ª–æ–≤ (`app/api/work-files/route.ts`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è –∞–¥–º–∏–Ω–∞: –µ—Å–ª–∏ —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 'Admin', –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è –≤—Å–µ –∑–∞–ø–∏—Å–∏ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –î–ª—è –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Ä–æ–ª–µ–π –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ (username, role) –¥–ª—è –∫–∞–∂–¥–æ–π –∑–∞–ø–∏—Å–∏

**–ö–æ–¥:**
```typescript
// –ï—Å–ª–∏ –∞–¥–º–∏–Ω - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ –∑–∞–ø–∏—Å–∏, –∏–Ω–∞—á–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏
if (currentUser.role === 'Admin') {
  query = query
    .gte('created_at', new Date().toISOString().slice(0, 7) + '-01')
    .lte('created_at', new Date().toISOString().slice(0, 7) + '-31')
} else {
  query = query
    .eq('user_id', currentUser.id)
    .gte('created_at', new Date().toISOString().slice(0, 7) + '-01')
    .lte('created_at', new Date().toISOString().slice(0, 7) + '-31')
}
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ API –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤ (`app/api/work-files/drafts/route.ts`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –¥–ª—è —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤
- –ê–¥–º–∏–Ω –≤–∏–¥–∏—Ç –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∏
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

**–ö–æ–¥:**
```typescript
// –ï—Å–ª–∏ –∞–¥–º–∏–Ω - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏, –∏–Ω–∞—á–µ —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏
if (currentUser.role !== 'Admin') {
  query = query.eq('user_id', currentUser.id)
}
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ (`app/work-files/page.tsx`)

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã `WorkEntry` –∏ `DraftFile` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ "–°–æ—Ç—Ä—É–¥–Ω–∏–∫" –≤ —Ç–∞–±–ª–∏—Ü—É –∑–∞–ø–∏—Å–µ–π (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞)
- –î–æ–±–∞–≤–ª–µ–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ–∑–¥–∞—Ç–µ–ª–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–∞)
- –û–±–Ω–æ–≤–ª–µ–Ω –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Å —É–∫–∞–∑–∞–Ω–∏–µ–º "(–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)" –¥–ª—è –∞–¥–º–∏–Ω–∞
- –î–æ–±–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø –¥–ª—è —Ä–æ–ª–∏ 'Admin' –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ —Ä–∞–±–æ—á–∏—Ö —Ñ–∞–π–ª–æ–≤

**–ö–æ–¥:**
```typescript
interface WorkEntry {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è
  user?: {
    username: string
    role: string
  }
}

// –í —Ç–∞–±–ª–∏—Ü–µ –∑–∞–ø–∏—Å–µ–π
{userRole === 'Admin' && (
  <th className="text-left py-3 px-4 font-semibold text-gray-900">–°–æ—Ç—Ä—É–¥–Ω–∏–∫</th>
)}

// –í –∑–∞–≥–æ–ª–æ–≤–∫–µ
<h1 className="text-3xl font-bold text-gray-900 mb-2">
  üìã –†–∞–±–æ—á–∏–µ —Ñ–∞–π–ª—ã
  {userRole === 'Admin' && <span className="text-sm text-blue-600 ml-2">(–í—Å–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏)</span>}
</h1>
```

### 4. –°–æ–∑–¥–∞–Ω–∏–µ API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞–º–∏

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `app/api/employees/[id]/route.ts` - API –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- `app/api/employees/route.ts` - –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- `supabase/migrations/005_create_employees_table.sql` - –ú–∏–≥—Ä–∞—Ü–∏—è —Ç–∞–±–ª–∏—Ü—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ CRUD –æ–ø–µ—Ä–∞—Ü–∏–π –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –î–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞—Ö (–∏–º—è, —Ñ–∞–º–∏–ª–∏—è, —Ç–µ–ª–µ—Ñ–æ–Ω, –¥–æ–ª–∂–Ω–æ—Å—Ç—å, –∑–∞—Ä–ø–ª–∞—Ç–∞)
- –ë–∞–Ω–∫–æ–≤—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (–Ω–∞–∑–≤–∞–Ω–∏–µ –±–∞–Ω–∫–∞, —Å—Ç—Ä–∞–Ω–∞, –Ω–æ–º–µ—Ä —Å—á–µ—Ç–∞, —Å–æ—Ä—Ç–æ–≤–æ–π –∫–æ–¥)
- –î–∞–Ω–Ω—ã–µ –∫–∞—Ä—Ç (–Ω–æ–º–µ—Ä, —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è, CVV)
- –î–∞–Ω–Ω—ã–µ –¥–ª—è –≤—Ö–æ–¥–∞ (URL, –ª–æ–≥–∏–Ω, –ø–∞—Ä–æ–ª—å)
- –†–æ–ª–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–æ—Å—Ç—É–ø–∞ (Admin, HR, Manager)

### 5. –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ API

**–ù–æ–≤—ã–µ —Ñ–∞–π–ª—ã:**
- `app/api/check-employees-table/route.ts` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- `app/api/create-employees-table/route.ts` - –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

## –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ê–¥–º–∏–Ω —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç:**
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —Ä–∞–±–æ—á–∏–µ –∑–∞–ø–∏—Å–∏ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ —á–µ—Ä–Ω–æ–≤–∏–∫–∏ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
- –í–∏–¥–µ—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–æ–º, –∫—Ç–æ —Å–æ–∑–¥–∞–ª –∫–∞–∂–¥—É—é –∑–∞–ø–∏—Å—å/—á–µ—Ä–Ω–æ–≤–∏–∫
- –ü–æ–ª—É—á–∞—Ç—å –ø–æ–ª–Ω—É—é –∫–∞—Ä—Ç–∏–Ω—É —Ä–∞–±–æ—Ç—ã –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

‚úÖ **–û–±—ã—á–Ω—ã–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏:**
- –í–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –∑–∞–ø–∏—Å–∏ –∏ —á–µ—Ä–Ω–æ–≤–∏–∫–∏
- –ù–µ –∏–º–µ—é—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º –¥—Ä—É–≥–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞—â–∏—â–µ–Ω—ã —Ä–æ–ª–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- API –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–µ—Ä–≤–µ—Ä–∞
- RLS –ø–æ–ª–∏—Ç–∏–∫–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∑–∞—â–∏—Ç—É

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

1. ‚úÖ –¢–∞–±–ª–∏—Ü–∞ employees —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. ‚úÖ API –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∞–±–ª–∏—Ü—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
1. –í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω
2. –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É "–†–∞–±–æ—á–∏–µ —Ñ–∞–π–ª—ã"
3. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤–∏–¥–Ω—ã –∑–∞–ø–∏—Å–∏ –≤—Å–µ—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–æ–∑–¥–∞—Ç–µ–ª—è—Ö –∑–∞–ø–∏—Å–µ–π

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! üéâ
